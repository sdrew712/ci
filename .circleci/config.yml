# version: 2.1
# jobs:
#   build:
#     steps:
#       - checkout # check out the code in the project directory
#       - run npm install # run the `echo` command
#     -run: npm run test


# orbs: # declare what orbs we are going to use
#   node: circleci/node@2.0.2 # the node orb provides common node-related configuration

# version: 2.1 # using 2.1 provides access to orbs and other features

# workflows:
#   matrix-tests:
#     jobs:
#       build:
#         steps:
#           - checkout # check out the code in the project directory
#           - run npm install # run the `echo` command
#         -run: npm run test

version: 2.1
jobs: #we now have TWO jobs, so that a workflow can coordinate them!
  one: #This is our first job
    docker: #it uses the docker executor
      - image: circleci/ruby:2.4.1 #specifically, a docker iamge with ruby 2.4.1
        auth: 
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD # context / project UI env-var reference
    # Steps are a list of commands to run inside the docker container above. 
    steps: 
      - checkout # this pulls code down from GitHub
          - run npm install # run the `echo` command
          - run npm run test
# Under the workflows: map, we can coordinate our two jobs, defined above. 
workflows: 
  version: 2
  one_job: # This is the name of our workflow
    jobs: # And here we tell it what jobs to run.
      - one 